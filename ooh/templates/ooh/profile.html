{% extends 'ooh/base.html' %}
{% load static %}

{% block content %}
<div id=content>
    <div class="user-container-background">
        <div class="user-container">
            <div class="profile-header">
                <div class="profile-img">
                    <img src="{% static 'ooh/img/avatar.png'%}" width="200" alt="">
                </div>
                <div class="profile-nav-info">
                    <h4 class="user-name">
                        {{ user.firstname }} {{ user.lastname }} 
                    </h4>
                    <div class="address">
                        <!-- <p class="state">{{ user.locationID__plz }} {{ user.locationID__cityname}}</p>
                        <span class="country"> {{ user.locationID__bundesland}}</span>  -->
                        {% if user.location %}
                        <p class="state">{{ user.street}} {{user.housenumber}}</p>
                        <span class="country">, {{ user.location }} </span> 
                        {%endif%}
                    </div>
    
                </div>
                <div class="profile-option">
                    <div class="notification">
                        <i class="fa fa-bell"></i>
                        <span class="alert-message">1</span>
    
                    </div>
                </div>
            </div>
            <div class="main-bd">
                <div class="left-side">
                    <div class="profile-side">
                        <p class="mobile-number">
                            <i class="fa fa-phone"></i>
                            123456789
                        </p>
                        <p class="user-mail">
                            <i class="fa fa-envelope"></i>
                            {{ user.email }}
                        </p>
                        {% if user.is_staff or user.is_superuser %}
                        <p class="user-status">
                            <i class="fa fa-id-card-o" ></i>
                            {% if user.is_superuser  %}
                            Admin
                            {% elif user.is_staff %}
                            Mitarbeiter von ooh
                            {% elif user.admin %}
                            Moderator
                            {% else %}
                            Benutzer
                            {% endif %}
                        </p>
                        {% endif %}
                        <div class="user-bio">
                            <h4>Bio</h4>
                            <p class="bio" id="bio">
                                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi nostrum vero quaerat corrupti, consequuntur iste, odit, expedita sequi architecto esse fugiat magnam officiis molestiae totam libero ratione voluptate maxime. Nulla.
                            </p>
                        </div>
                        <div class="profile-btn">
                            <button class="chatbtn">
                                <i class="fa fa-comment"></i>Chat
                            </button>
                            <button class="createbtn">
                                <i class="fa fa-plus"></i>Create
                            </button>
                        </div>
                        <div class="user-rating">
                            <h4 class="rating">4.5</h4>
                            <div class="rate">
                                <div class="stars">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                </div>
                                <span class="no-user"><span>123</span>&nbsp;&nbsp;reviews</span>
                            </div>
                        </div>
                        
                        <div class="logout">
                            <form action="{% url 'ooh:logout' %}" method="get">
                                {% csrf_token %}
                                <input id="logout" class="logout-btn" type="submit" value="Abmelden" />
                            </form>
                            
                        </div>
                    </div>
                </div>
               <div class="right-side">
                   <div class="nav-right">
                       <ul>
                           <li onclick="tabs(0)" class="user-post active" style="margin-bottom: 0em;  list-style-type: none;">Fragen</li>
                           <li onclick="tabs(1)" class="user-review" style="margin-bottom: 0em;list-style-type: none;">Reviews</li>
                           <li onclick="tabs(2)" class="user-setting" style="margin-bottom: 0em;list-style-type: none;">Settings</li>
                       </ul>
                   </div>
                   <div class="profile-body">
                       <div class="profile-posts tab">
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore vero, accusamus iste impedit delectus sequi unde nostrum porro, dicta illum libero architecto quos neque esse provident. Assumenda a inventore voluptas!</p>    
                        
                       </div>
                       <div class="profile-review tab">
                           <h4>User Review</h4>
                           <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus earum illo, maxime, magnam commodi temporibus consectetur soluta incidunt quas sequi repudiandae reprehenderit iusto recusandae officiis itaque nobis. Eum, ut ex.</p>
                        </div>
                        <div class="profile-setting tab">
                            <h4>Account Settings</h4>
                            <h3>Profil vervollständigen</h3>
                            {% if user.location  %}
                            {#//TODO das ganze sollte über ein ausklappbares menü dargestellt werden, damit es nicht so wirkt, als müsste es ausgefüllt werden#}
                            <form method=post action=".">
                                {% csrf_token %}
                                
                                <input name=data value="chgloc" type="hidden"/>
                                <input name=plz id=plz placeholder="Postleitzahl" value="{{ user.location.plz }}" />
                                <input name=cityname id=cityname placeholder="Stadtname" value="{{ user.location.cityname }}"/><br/>
                                <input name=street id=street placeholder="Straße" value="{{ user.street }}">
                                <input name=housenumber id=housenumber placeholder="Hausnr" value="{{ user.housenumber }}"><br/>
                                <input id="allowedit" name="allowedit"  type="checkbox" required />
                                <label for="allowedit">Wirklich ändern?</label>
                                <input type=submit value="Addresse ändern">
                            </form>
                            {% else %}
                            <form method=post action=".">
                                {% csrf_token %}
                                <input name=data value="addloc" type="hidden"/>
                                <input name=plz id=plz  placeholder="Postleitzahl">
                                <!-- Stadtname sollte automatisch auf Basis der PLZ gesetzt werden-->
                                <input name=cityname id=cityname placeholder="Stadtname"><br/>
                                <input name=street id=street placeholder="Straße" value="" >
                                <input name=housenumber id=housenumber placeholder="Hausnr"><br/>
                                <input type=submit value="Addresse hinzufügen">
                            </form>
                            {%endif%}
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptas, quia sunt explicabo eveniet quod soluta nam nostrum ut tempore! Veritatis itaque repudiandae harum ex facilis. Doloribus ipsam a dolore unde!</p>
                        </div>
                   </div>
               </div> 
            </div>
        </div>
    </div>
</div> <!-- #content -->


<script>
    $('.nav-right ul li').click(function(){
        $(this).addClass("active").siblings().removeClass('active');
        })


        const tabBtn = document.querySelectorAll('.nav-right ul li');
        const tab = document.querySelectorAll('.tab');

        function tabs(panelIndex){
            tab.forEach(function(node){
                node.style.display = 'none';
            });
            tab[panelIndex].style.display = 'block';
        }
        tabs(0);

        let bio = document.querySelector('.bio');
        let bioOld = bio.innerText;

        function bioText(){
            bio.innerText = bio.innerText.substring(0, 100) + "...";
            bio.innerHTML += "&nbsp;" + "<span onclick='addLength()' id='see-more-bio'> [See More]</span>";
        }
        bioText();

        function addLength(){
            bio.innerHTML = bioOld;
            bio.innerHTML += "&nbsp;" + "<span onclick='bioText()' id='see-less-bio'> [See Less]</span>";
        }
</script>

{%endblock%}    